// CodeMirror, copyright (c) by Marijn Haverbeke and others
// Distributed under an MIT license: http://codemirror.net/LICENSE

(function(e){typeof exports=="object"&&typeof module=="object"?e(require("../../lib/codemirror")):typeof define=="function"&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){"use strict";e.defineMode("javascript",function(t,n){function r(e){var t=!1,n,r=!1;while((n=e.next())!=null){if(!t){if(n=="/"&&!r)return;n=="["?r=!0:r&&n=="]"&&(r=!1)}t=!t&&n=="\\"}}function i(e,t,n){return Et=e,St=n,t}function s(e,t){var n=e.next();if(n=='"'||n=="'")return t.tokenize=o(n),t.tokenize(e,t);if(n=="."&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return i("number","number");if(n=="."&&e.match(".."))return i("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return i(n);if(n=="="&&e.eat(">"))return i("=>","operator");if(n=="0"&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),i("number","number");if(/\d/.test(n))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),i("number","number");if(n=="/")return e.eat("*")?(t.tokenize=u,u(e,t)):e.eat("/")?(e.skipToEnd(),i("comment","comment")):t.lastType=="operator"||t.lastType=="keyword c"||t.lastType=="sof"||/^[\[{}\(,;:]$/.test(t.lastType)?(r(e),e.eatWhile(/[gimy]/),i("regexp","string-2")):(e.eatWhile(bt),i("operator","operator",e.current()));if(n=="`")return t.tokenize=a,a(e,t);if(n=="#")return e.skipToEnd(),i("error","error");if(bt.test(n))return e.eatWhile(bt),i("operator","operator",e.current());e.eatWhile(/[\w\$_]/);var s=e.current(),f=yt.propertyIsEnumerable(s)&&yt[s];return f&&t.lastType!="."?i(f.type,f.style,s):i("variable","variable",s)}function o(e){return function(t,n){var r=!1,o;if(vt&&t.peek()=="@"&&t.match(wt))return n.tokenize=s,i("jsonld-keyword","meta");while((o=t.next())!=null){if(o==e&&!r)break;r=!r&&o=="\\"}return r||(n.tokenize=s),i("string","string")}}function u(e,t){var n=!1,r;while(r=e.next()){if(r=="/"&&n){t.tokenize=s;break}n=r=="*"}return i("comment","comment")}function a(e,t){var n=!1,r;while((r=e.next())!=null){if(!n&&(r=="`"||r=="$"&&e.eat("{"))){t.tokenize=s;break}n=!n&&r=="\\"}return i("quasi","string-2",e.current())}function f(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(n<0)return;var r=0,i=!1;for(var s=n-1;s>=0;--s){var o=e.string.charAt(s),u=xt.indexOf(o);if(u>=0&&u<3){if(!r){++s;break}if(--r==0)break}else if(u>=3&&u<6)++r;else if(/[$\w]/.test(o))i=!0;else if(i&&!r){++s;break}}i&&!r&&(t.fatArrowAt=s)}function l(e,t,n,r,i,s){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=s,r!=null&&(this.align=r)}function c(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(var n=r.vars;n;n=n.next)if(n.name==t)return!0}function h(e,t,n,r,i){var s=e.cc;Nt.state=e,Nt.stream=i,Nt.marked=null,Nt.cc=s,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);for(;;){var o=s.length?s.pop():mt?S:E;if(o(n,r)){while(s.length&&s[s.length-1].lex)s.pop()();return Nt.marked?Nt.marked:n=="variable"&&c(e,r)?"variable-2":t}}}function p(){for(var e=arguments.length-1;e>=0;e--)Nt.cc.push(arguments[e])}function d(){return p.apply(null,arguments),!0}function v(e){function t(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var r=Nt.state;if(r.context){Nt.marked="def";if(t(r.localVars))return;r.localVars={name:e,next:r.localVars}}else{if(t(r.globalVars))return;n.globalVars&&(r.globalVars={name:e,next:r.globalVars})}}function m(){Nt.state.context={prev:Nt.state.context,vars:Nt.state.localVars},Nt.state.localVars=Ct}function g(){Nt.state.localVars=Nt.state.context.vars,Nt.state.context=Nt.state.context.prev}function y(e,t){var n=function(){var n=Nt.state,r=n.indented;n.lexical.type=="stat"&&(r=n.lexical.indented),n.lexical=new l(r,Nt.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function b(){var e=Nt.state;e.lexical.prev&&(e.lexical.type==")"&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function w(e){function t(n){return n==e?d():e==";"?p():d(t)}return t}function E(e,t){return e=="var"?d(y("vardef",t.length),z,w(";"),b):e=="keyword a"?d(y("form"),S,E,b):e=="keyword b"?d(y("form"),E,b):e=="{"?d(y("}"),q,b):e==";"?d():e=="if"?(Nt.state.lexical.info=="else"&&Nt.state.cc[Nt.state.cc.length-1]==b&&Nt.state.cc.pop()(),d(y("form"),S,E,b,J)):e=="function"?d(et):e=="for"?d(y("form"),K,E,b):e=="variable"?d(y("stat"),D):e=="switch"?d(y("form"),S,y("}","switch"),w("{"),q,b,b):e=="case"?d(S,w(":")):e=="default"?d(w(":")):e=="catch"?d(y("form"),m,w("("),tt,w(")"),E,b,g):e=="module"?d(y("form"),m,st,g,b):e=="class"?d(y("form"),nt,it,b):e=="export"?d(y("form"),ot,b):e=="import"?d(y("form"),ut,b):p(y("stat"),S,w(";"),b)}function S(e){return T(e,!1)}function x(e){return T(e,!0)}function T(e,t){if(Nt.state.fatArrowAt==Nt.stream.start){var n=t?_:M;if(e=="(")return d(m,y(")"),F(W,")"),b,w("=>"),n,g);if(e=="variable")return p(m,W,w("=>"),n,g)}var r=t?L:k;return Tt.hasOwnProperty(e)?d(r):e=="function"?d(et,r):e=="keyword c"?d(t?C:N):e=="("?d(y(")"),N,ht,w(")"),b,r):e=="operator"||e=="spread"?d(t?x:S):e=="["?d(y("]"),lt,b,r):e=="{"?I(H,"}",null,r):e=="quasi"?p(A,r):d()}function N(e){return e.match(/[;\}\)\],]/)?p():p(S)}function C(e){return e.match(/[;\}\)\],]/)?p():p(x)}function k(e,t){return e==","?d(S):L(e,t,!1)}function L(e,t,n){var r=n==0?k:L,i=n==0?S:x;if(t=="=>")return d(m,n?_:M,g);if(e=="operator")return/\+\+|--/.test(t)?d(r):t=="?"?d(S,w(":"),i):d(i);if(e=="quasi")return p(A,r);if(e==";")return;if(e=="(")return I(x,")","call",r);if(e==".")return d(P,r);if(e=="[")return d(y("]"),N,w("]"),b,r)}function A(e,t){return e!="quasi"?p():t.slice(t.length-2)!="${"?d(A):d(S,O)}function O(e){if(e=="}")return Nt.marked="string-2",Nt.state.tokenize=a,d(A)}function M(e){return f(Nt.stream,Nt.state),e=="{"?p(E):p(S)}function _(e){return f(Nt.stream,Nt.state),e=="{"?p(E):p(x)}function D(e){return e==":"?d(b,E):p(k,w(";"),b)}function P(e){if(e=="variable")return Nt.marked="property",d()}function H(e,t){if(e=="variable"){Nt.marked="property";if(t=="get"||t=="set")return d(B)}else if(e=="number"||e=="string")Nt.marked=vt?"property":e+" property";else if(e=="[")return d(S,w("]"),j);if(Tt.hasOwnProperty(e))return d(j)}function B(e){return e!="variable"?p(j):(Nt.marked="property",d(et))}function j(e){if(e==":")return d(x);if(e=="(")return p(et)}function F(e,t){function n(r){if(r==","){var i=Nt.state.lexical;return i.info=="call"&&(i.pos=(i.pos||0)+1),d(e,n)}return r==t?d():d(w(t))}return function(r){return r==t?d():p(e,n)}}function I(e,t,n){for(var r=3;r<arguments.length;r++)Nt.cc.push(arguments[r]);return d(y(t,n),F(e,t),b)}function q(e){return e=="}"?d():p(E,q)}function R(e){if(gt&&e==":")return d(U)}function U(e){if(e=="variable")return Nt.marked="variable-3",d()}function z(){return p(W,R,V,$)}function W(e,t){if(e=="variable")return v(t),d();if(e=="[")return I(W,"]");if(e=="{")return I(X,"}")}function X(e,t){return e=="variable"&&!Nt.stream.match(/^\s*:/,!1)?(v(t),d(V)):(e=="variable"&&(Nt.marked="property"),d(w(":"),W,V))}function V(e,t){if(t=="=")return d(x)}function $(e){if(e==",")return d(z)}function J(e,t){if(e=="keyword b"&&t=="else")return d(y("form","else"),E,b)}function K(e){if(e=="(")return d(y(")"),Q,w(")"),b)}function Q(e){return e=="var"?d(z,w(";"),Y):e==";"?d(Y):e=="variable"?d(G):p(S,w(";"),Y)}function G(e,t){return t=="in"||t=="of"?(Nt.marked="keyword",d(S)):d(k,Y)}function Y(e,t){return e==";"?d(Z):t=="in"||t=="of"?(Nt.marked="keyword",d(S)):p(S,w(";"),Z)}function Z(e){e!=")"&&d(S)}function et(e,t){if(t=="*")return Nt.marked="keyword",d(et);if(e=="variable")return v(t),d(et);if(e=="(")return d(m,y(")"),F(tt,")"),b,E,g)}function tt(e){return e=="spread"?d(tt):p(W,R)}function nt(e,t){if(e=="variable")return v(t),d(rt)}function rt(e,t){if(t=="extends")return d(S)}function it(e){if(e=="{")return I(H,"}")}function st(e,t){if(e=="string")return d(E);if(e=="variable")return v(t),d(ft)}function ot(e,t){return t=="*"?(Nt.marked="keyword",d(ft,w(";"))):t=="default"?(Nt.marked="keyword",d(S,w(";"))):p(E)}function ut(e){return e=="string"?d():p(at,ft)}function at(e,t){return e=="{"?I(at,"}"):(e=="variable"&&v(t),d())}function ft(e,t){if(t=="from")return Nt.marked="keyword",d(S)}function lt(e){return e=="]"?d():p(x,ct)}function ct(e){return e=="for"?p(ht,w("]")):e==","?d(F(x,"]")):p(F(x,"]"))}function ht(e){if(e=="for")return d(K,ht);if(e=="if")return d(S,ht)}var pt=t.indentUnit,dt=n.statementIndent,vt=n.jsonld,mt=n.json||vt,gt=n.typescript,yt=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("operator"),s={type:"atom",style:"atom"},o={"if":e("if"),"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"debugger":r,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":i,"typeof":i,"instanceof":i,"true":s,"false":s,"null":s,"undefined":s,NaN:s,Infinity:s,"this":e("this"),module:e("module"),"class":e("class"),"super":e("atom"),yield:r,"export":e("export"),"import":e("import"),"extends":r};if(gt){var u={type:"variable",style:"variable-3"},a={"interface":e("interface"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),string:u,number:u,bool:u,any:u};for(var f in a)o[f]=a[f]}return o}(),bt=/[+\-*&%=<>!?|~^]/,wt=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,Et,St,xt="([{}])",Tt={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Nt={state:null,column:null,marked:null,cc:null},Ct={name:"this",next:{name:"arguments"}};return b.lex=!0,{startState:function(e){var t={tokenize:s,lastType:"sof",cc:[],lexical:new l((e||0)-pt,0,"block",!1),localVars:n.localVars,context:n.localVars&&{vars:n.localVars},indented:0};return n.globalVars&&typeof n.globalVars=="object"&&(t.globalVars=n.globalVars),t},token:function(e,t){e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),f(e,t));if(t.tokenize!=u&&e.eatSpace())return null;var n=t.tokenize(e,t);return Et=="comment"?n:(t.lastType=Et!="operator"||St!="++"&&St!="--"?Et:"incdec",h(t,n,Et,St,e))},indent:function(t,r){if(t.tokenize==u)return e.Pass;if(t.tokenize!=s)return 0;var i=r&&r.charAt(0),o=t.lexical;if(!/^\s*else\b/.test(r))for(var a=t.cc.length-1;a>=0;--a){var f=t.cc[a];if(f==b)o=o.prev;else if(f!=J)break}o.type=="stat"&&i=="}"&&(o=o.prev),dt&&o.type==")"&&o.prev.type=="stat"&&(o=o.prev);var l=o.type,c=i==l;return l=="vardef"?o.indented+(t.lastType=="operator"||t.lastType==","?o.info+1:0):l=="form"&&i=="{"?o.indented:l=="form"?o.indented+pt:l=="stat"?o.indented+(t.lastType=="operator"||t.lastType==","?dt||pt:0):o.info=="switch"&&!c&&n.doubleIndentSwitch!=0?o.indented+(/^(?:case|default)\b/.test(r)?pt:2*pt):o.align?o.column+(c?0:1):o.indented+(c?0:pt)},electricChars:":{}",blockCommentStart:mt?null:"/*",blockCommentEnd:mt?null:"*/",lineComment:mt?null:"//",fold:"brace",helperType:mt?"json":"javascript",jsonldMode:vt,jsonMode:mt}}),e.registerHelper("wordChars","javascript",/[\\w$]/),e.defineMIME("text/javascript","javascript"),e.defineMIME("text/ecmascript","javascript"),e.defineMIME("application/javascript","javascript"),e.defineMIME("application/ecmascript","javascript"),e.defineMIME("application/json",{name:"javascript",json:!0}),e.defineMIME("application/x-json",{name:"javascript",json:!0}),e.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),e.defineMIME("text/typescript",{name:"javascript",typescript:!0}),e.defineMIME("application/typescript",{name:"javascript",typescript:!0})});